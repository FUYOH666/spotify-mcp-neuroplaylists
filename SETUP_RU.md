# Настройка spotify-mcp для создания плейлистов через ИИ

## Что умеет этот проект?

✅ **Создание плейлистов** - ИИ может создавать новые плейлисты с названием и описанием  
✅ **Поиск музыки** - поиск треков, альбомов, артистов, плейлистов  
✅ **Добавление треков** - добавление найденных треков в плейлисты  
✅ **Управление плейлистами** - изменение названия, описания, удаление треков  
✅ **Информация о музыке** - получение детальной информации о треках/альбомах/артистах  

## Шаг 1: Получение Spotify API ключей

1. Зайдите на [developer.spotify.com](https://developer.spotify.com/)
2. Войдите в свой аккаунт Spotify (нужен **Spotify Premium**)
3. Перейдите в [Dashboard](https://developer.spotify.com/dashboard)
4. Нажмите "Create app"
5. Заполните форму:
   - **App name**: любое имя (например, "My AI Playlists")
   - **App description**: описание (опционально)
   - **Redirect URI**: `http://127.0.0.1:8080/callback` (обязательно!)
   - **Website**: можно оставить пустым
6. После создания приложения скопируйте:
   - **Client ID**
   - **Client Secret**

## Шаг 2: Настройка переменных окружения

1. Скопируйте `.env.example` в `.env`:
   ```bash
   cp .env.example .env
   ```

2. Откройте `.env` и заполните ваши ключи:
   ```
   SPOTIFY_CLIENT_ID=ваш_client_id
   SPOTIFY_CLIENT_SECRET=ваш_client_secret
   SPOTIFY_REDIRECT_URI=http://127.0.0.1:8080/callback
   ```

## Шаг 3: Настройка MCP в Cursor

1. Найдите файл конфигурации MCP для Cursor:
   - Обычно находится в настройках Cursor или в `~/.cursor/mcp.json`
   - Если файла нет, создайте его

2. Добавьте конфигурацию для spotify-mcp:

```json
{
  "mcpServers": {
    "spotify": {
      "command": "uv",
      "args": [
        "--directory",
        "/path/to/spotify-mcp-neuroplaylists",
        "run",
        "spotify-mcp"
      ],
      "env": {
        "SPOTIFY_CLIENT_ID": "ваш_client_id",
        "SPOTIFY_CLIENT_SECRET": "ваш_client_secret",
        "SPOTIFY_REDIRECT_URI": "http://127.0.0.1:8080/callback"
      }
    }
  }
}
```

3. **Важно**: Замените `/path/to/spotify-mcp-neuroplaylists` на реальный путь к клонированному репозиторию и укажите ваши реальные API ключи!

4. Перезапустите Cursor, чтобы применить изменения

## Шаг 4: Первая авторизация

При первом использовании MCP сервер откроет браузер для авторизации Spotify:
1. Разрешите доступ приложению
2. После успешной авторизации токен сохранится локально
3. В дальнейшем авторизация будет автоматической

## Шаг 5: Использование

Теперь вы можете попросить ИИ создать плейлист! Например:

- "Создай плейлист 'Утренняя энергия' с энергичными треками"
- "Найди треки артиста [имя] и добавь их в новый плейлист"
- "Создай плейлист из топ-треков [жанр]"

## Проверка работы

Для проверки можно использовать MCP Inspector:

```bash
npx @modelcontextprotocol/inspector uv --directory /path/to/spotify-mcp-neuroplaylists run spotify-mcp
```

**Важно:** Замените `/path/to/spotify-mcp-neuroplaylists` на реальный путь к репозиторию.

## Устранение проблем

1. **Ошибка авторизации**: 
   - Убедитесь, что redirect URI точно совпадает: `http://127.0.0.1:8080/callback`
   - Проверьте, что у вас Spotify Premium

2. **MCP не запускается**:
   - Проверьте версию `uv`: `uv --version` (нужна >= 0.54)
   - Убедитесь, что зависимости установлены: `uv sync`

3. **Права доступа**:
   - Если возникают проблемы с правами: `chmod -R 755 .`

## Доступные функции для ИИ

- `SpotifyPlaylist` с действиями:
  - `create` - создать плейлист
  - `get` - получить список плейлистов
  - `get_tracks` - получить треки из плейлиста
  - `add_tracks` - добавить треки
  - `remove_tracks` - удалить треки
  - `change_details` - изменить название/описание

- `SpotifySearch` - поиск треков/альбомов/артистов/плейлистов
- `SpotifyGetInfo` - детальная информация о треке/альбоме/артисте
- `SpotifyPlayback` - управление воспроизведением (опционально)
